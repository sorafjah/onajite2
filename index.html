<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- H1ã‚’å‰Šé™¤ã—ãŸãŸã‚ã€titleã‚¿ã‚°ã‚’èª¿æ•´ -->
    <title>ãŠãªã˜ã‚‚ã®ã‚’ã ãã†</title>
    <!-- Tailwind CSSã‚’èª­ã¿è¾¼ã¿ã¾ã™ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ãƒ•ã‚©ãƒ³ãƒˆã‚’èª­ã¿è¾¼ã¿ã¾ã™ */
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@700&display=swap');
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            touch-action: manipulation; /* ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã«ã‚ˆã‚‹ã‚ºãƒ¼ãƒ ã‚’ç„¡åŠ¹åŒ– */
        }
        /* ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯æ™‚ã®è¦–è¦šçš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ */
        .btn-active:active {
            transform: scale(0.95);
        }
        /* æ‰‹ã®çµµæ–‡å­—ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹éš›ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .hand-emoji {
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .hand-emoji.pop {
            transform: scale(1.2);
        }
        /* ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–ï¼ˆdisabledï¼‰ã—ãŸã¨ãã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .btn-disabled:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: scale(1); /* activeæ™‚ã®ç¸®å°ã‚’ç„¡åŠ¹åŒ– */
        }
    </style>
</head>
<body class="bg-sky-100 flex items-center justify-center h-screen p-4">

    <!-- ã‚¿ã‚¤ãƒˆãƒ«ã‚’å‰Šé™¤ã—ã€å…¨ä½“ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’èª¿æ•´ -->
    <div class="w-full max-w-2xl mx-auto bg-white/30 backdrop-blur-xl rounded-3xl shadow-2xl p-6 md:p-8 text-center">
        
        <!-- h1 class="text-lg md:text-xl font-bold text-blue-600 text-shadow mb-8">ãŠãªã˜ã‚‚ã®ã‚’ã ãã†ï¼“</h1 --> <!-- ã‚¿ã‚¤ãƒˆãƒ«ã‚’å‰Šé™¤ -->

        <!-- æ‰‹ã‚’è¡¨ç¤ºã™ã‚‹ã‚¨ãƒªã‚¢ -->
        <!-- h1å‰Šé™¤ã«ä¼´ã„ãƒãƒ¼ã‚¸ãƒ³èª¿æ•´(mb-10 -> mb-8), æ‰‹ã‚’å¤§ãã (text-6xl md:text-8xl -> text-9xl) -->
        <!-- ç™½æ ã‚’å¤§ãã (w-32 h-32 md:w-48 md:h-48 -> w-40 h-40 md:w-64 md:h-64) -->
        <div class="flex justify-center items-center space-x-4 md:space-x-8 mb-8">
            <div class="bg-white rounded-2xl shadow-lg w-40 h-40 md:w-64 md:h-64 flex items-center justify-center">
                <!-- æ‰‹ã‚’å¤§ãã (text-9xl -> text-8xl md:text-[10rem]) -->
                <span id="hand-left-emoji" class="text-8xl md:text-[10rem] hand-emoji"></span>
            </div>
            <div class="bg-white rounded-2xl shadow-lg w-40 h-40 md:w-64 md:h-64 flex items-center justify-center">
                <!-- æ‰‹ã‚’å¤§ãã (text-9xl -> text-8xl md:text-[10rem]) -->
                <span id="hand-right-emoji" class="text-8xl md:text-[10rem] hand-emoji"></span>
            </div>
        </div>

        <!-- ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
        <div class="flex flex-col sm:flex-row flex-wrap justify-center items-center gap-3"> <!-- gap-4 -> gap-3 -->
            <!-- ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€/ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ -->
            <!-- ãƒœã‚¿ãƒ³ã‚’å°ã•ã (py-3 px-10 text-lg md:text-xl -> py-2 px-6 text-base), è‰²å¤‰æ›´ (indigo -> teal) -->
            <button id="game-button" class="w-full sm:w-auto bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-6 rounded-full text-base shadow-md transition-all duration-200 btn-active btn-disabled">
                ã‚¹ã‚¿ãƒ¼ãƒˆ
            </button>
            <!-- ã€Œè‡ªå‹•ã€/ã€Œåœæ­¢ã€ãƒœã‚¿ãƒ³ -->
            <!-- ãƒœã‚¿ãƒ³ã‚’å°ã•ã, è‰²å¤‰æ›´ (green -> teal) -->
            <button id="auto-button" class="w-full sm:w-auto bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-6 rounded-full text-base shadow-md transition-all duration-200 btn-active btn-disabled">
                è‡ªå‹•
            </button>
            <!-- ã€Œã‚‚ã£ã¨ã€/ã€Œãµã¤ã†ã€ãƒœã‚¿ãƒ³ -->
            <!-- ãƒœã‚¿ãƒ³ã‚’å°ã•ã -->
            <button id="more-button" class="w-full sm:w-auto bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-6 rounded-full text-base shadow-md transition-all duration-200 btn-active btn-disabled">
                ã‚‚ã£ã¨
            </button>
        </div>
    </div>

    <script>
        // --- DOMè¦ç´ ã®å–å¾— ---
        const gameButton = document.getElementById('game-button');
        const autoButton = document.getElementById('auto-button');
        const moreButton = document.getElementById('more-button'); // è¿½åŠ 
        const leftHandEmoji = document.getElementById('hand-left-emoji');
        const rightHandEmoji = document.getElementById('hand-right-emoji');

        // --- ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹ ---
        const hands = ['âœŠ', 'âœŒï¸', 'âœ‹'];
        const irregularHands = ['ğŸ¤', 'ğŸ¤Ÿ', 'ğŸ¤˜', 'ğŸ¤™', 'ğŸ‘Œ', 'ğŸ––'];
        let isGameStarted = false;
        let autoPlayTimeoutId = null; // è‡ªå‹•å†ç”Ÿã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆID
        let isMoreMode = false; // ã€Œã‚‚ã£ã¨ã€ãƒ¢ãƒ¼ãƒ‰ã®çŠ¶æ…‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯falseï¼‰

        // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ ---
        gameButton.addEventListener('click', handleManualPlay);
        autoButton.addEventListener('click', toggleAutoPlay);
        moreButton.addEventListener('click', toggleMoreMode); // è¿½åŠ 

        /**
         * ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€/ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†
         */
        function handleManualPlay() {
            if (!isGameStarted) {
                isGameStarted = true;
                gameButton.textContent = 'æ¬¡ã¸';
            }
            generateAndShowHands();
        }

        /**
         * ã€Œè‡ªå‹•ã€/ã€Œåœæ­¢ã€ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†
         */
        function toggleAutoPlay() {
            // è‡ªå‹•å†ç”ŸãŒæ—¢ã«å®Ÿè¡Œä¸­ã®å ´åˆï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆIDãŒå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
            if (autoPlayTimeoutId) {
                clearTimeout(autoPlayTimeoutId);
                autoPlayTimeoutId = null;
                autoButton.textContent = 'è‡ªå‹•';
                // ã€Œåœæ­¢ã€è‰²(gray)ã‚’ã€Œè‡ªå‹•ã€è‰²(teal)ã«æˆ»ã™ (bg-gray-500 -> bg-gray-400)
                autoButton.classList.remove('bg-gray-400', 'hover:bg-gray-500');
                autoButton.classList.add('bg-teal-500', 'hover:bg-teal-600');
                gameButton.disabled = false; // ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
                moreButton.disabled = false; // ã€Œã‚‚ã£ã¨ã€ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            } else {
                // è‡ªå‹•å†ç”Ÿã‚’é–‹å§‹
                if (!isGameStarted) {
                    isGameStarted = true;
                    gameButton.textContent = 'æ¬¡ã¸';
                }
                autoButton.textContent = 'åœæ­¢';
                // ã€Œè‡ªå‹•ã€è‰²(teal)ã‚’ã€Œåœæ­¢ã€è‰²(gray)ã«å¤‰æ›´ (bg-gray-500 -> bg-gray-400)
                autoButton.classList.remove('bg-teal-500', 'hover:bg-teal-600');
                autoButton.classList.add('bg-gray-400', 'hover:bg-gray-500');
                gameButton.disabled = true; // ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                moreButton.disabled = true; // ã€Œã‚‚ã£ã¨ã€ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                autoPlayStep(); // è‡ªå‹•å†ç”Ÿã®ãƒ«ãƒ¼ãƒ—ã‚’é–‹å§‹
            }
        }

        /**
         * ã€Œã‚‚ã£ã¨ã€/ã€Œãµã¤ã†ã€ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç† (è¿½åŠ )
         */
        function toggleMoreMode() {
            isMoreMode = !isMoreMode; // çŠ¶æ…‹ã‚’åè»¢

            if (isMoreMode) {
                // ã€Œã‚‚ã£ã¨ã€ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ -> ã€Œãµã¤ã†ã€ãƒœã‚¿ãƒ³è¡¨ç¤º
                moreButton.textContent = 'ãµã¤ã†';
                // ã€Œã‚‚ã£ã¨ã€è‰²(teal)ã‚’ã€Œãµã¤ã†ã€è‰²(gray)ã«å¤‰æ›´ (bg-gray-500 -> bg-gray-400)
                moreButton.classList.remove('bg-teal-500', 'hover:bg-teal-600');
                moreButton.classList.add('bg-gray-400', 'hover:bg-gray-500');
            } else {
                // ã€Œãµã¤ã†ã€ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ -> ã€Œã‚‚ã£ã¨ã€ãƒœã‚¿ãƒ³è¡¨ç¤º
                moreButton.textContent = 'ã‚‚ã£ã¨';
                // ã€Œãµã¤ã†ã€è‰²(gray)ã‚’ã€Œã‚‚ã£ã¨ã€è‰²(teal)ã«æˆ»ã™ (bg-gray-500 -> bg-gray-400)
                moreButton.classList.remove('bg-gray-400', 'hover:bg-gray-500');
                moreButton.classList.add('bg-teal-500', 'hover:bg-teal-600');
            }
        }

        /**
         * è‡ªå‹•å†ç”Ÿã®å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œã™ã‚‹
         */
        function autoPlayStep() {
            // wasIrregularã®åˆ¤å®šã‚’å¾©æ´»
            const wasIrregular = generateAndShowHands();
            // é…å»¶ã‚’ 2ç§’ (2000ms) ã«å¤‰æ›´ã€ã‚¤ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ãªã‚‰5ç§’ (5000ms)
            const delay = wasIrregular ? 5000 : 2000;
            autoPlayTimeoutId = setTimeout(autoPlayStep, delay);
        }
        
        /**
         * isMoreModeã®çŠ¶æ…‹ã«å¿œã˜ã¦ã€ãƒ©ãƒ³ãƒ€ãƒ ãªæ‰‹ã‚’1ã¤è¿”ã™ (ä¿®æ­£)
         * @returns {string} çµµæ–‡å­—
         */
        function getRandomHand() {
            // ã€Œã‚‚ã£ã¨ã€ãƒ¢ãƒ¼ãƒ‰ãŒtrueã®å ´åˆã®ã¿ã€10%ã®ç¢ºç‡ã§ã‚¤ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ãªæ‰‹ã‚’è€ƒæ…®
            if (isMoreMode && Math.random() < 0.1) {
                // ã‚¤ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ãªæ‰‹
                const randomIndex = Math.floor(Math.random() * irregularHands.length);
                return irregularHands[randomIndex];
            } else {
                // é€šå¸¸ã®æ‰‹ï¼ˆã‚°ãƒ¼ãƒ»ãƒãƒ§ã‚­ãƒ»ãƒ‘ãƒ¼ï¼‰
                const randomIndex = Math.floor(Math.random() * hands.length);
                return hands[randomIndex];
            }
        }

        /**
         * ãƒ©ãƒ³ãƒ€ãƒ ã«æ‰‹ã‚’ç”Ÿæˆã—ã¦ç”»é¢ã«è¡¨ç¤ºã™ã‚‹
         */
        function generateAndShowHands() {
            const leftHand = getRandomHand();
            const rightHand = getRandomHand();

            // ã‚¤ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ãªæ‰‹ãŒå«ã¾ã‚Œã¦ã„ãŸã‹ã©ã†ã‹ã®åˆ¤å®šï¼ˆã€Œãµã¤ã†ã€ãƒ¢ãƒ¼ãƒ‰ã§ã¯å¸¸ã«falseã«ãªã‚‹ï¼‰
            const wasIrregular = irregularHands.includes(leftHand) || irregularHands.includes(rightHand);

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœã‚’é©ç”¨
            [leftHandEmoji, rightHandEmoji].forEach(el => {
                el.classList.remove('pop');
                // DOMã®å†æç”»ã‚’å¼·åˆ¶
                void el.offsetWidth;
                el.classList.add('pop');
            });
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå°‘ã—è½ã¡ç€ã„ã¦ã‹ã‚‰çµµæ–‡å­—ã‚’å¤‰æ›´
            setTimeout(() => {
                leftHandEmoji.textContent = leftHand;
                rightHandEmoji.textContent = rightHand;
            }, 100);

            return wasIrregular;
        }

        // æœ€åˆã®è¡¨ç¤º
        generateAndShowHands();
    </script>

</body>
</html>

