<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŠãªã˜ã‚‚ã®ã‚’ã ãã†ï¼’</title>
    <!-- Tailwind CSSã‚’èª­ã¿è¾¼ã¿ã¾ã™ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ãƒ•ã‚©ãƒ³ãƒˆã‚’èª­ã¿è¾¼ã¿ã¾ã™ */
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@700&display=swap');
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            touch-action: manipulation; /* ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã«ã‚ˆã‚‹ã‚ºãƒ¼ãƒ ã‚’ç„¡åŠ¹åŒ– */
        }
        /* ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯æ™‚ã®è¦–è¦šçš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ */
        .btn-active:active {
            transform: scale(0.95);
        }
        /* æ‰‹ã®çµµæ–‡å­—ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹éš›ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .hand-emoji {
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .hand-emoji.pop {
            transform: scale(1.2);
        }
    </style>
</head>
<body class="bg-sky-100 flex items-center justify-center h-screen p-4">

    <div class="w-full max-w-2xl mx-auto bg-white/30 backdrop-blur-xl rounded-3xl shadow-2xl p-6 md:p-10 text-center">
        <h1 class="text-3xl md:text-5xl font-bold text-blue-600 text-shadow mb-8">ãŠãªã˜ã‚‚ã®ã‚’ã ãã†ï¼’</h1>

        <!-- æ‰‹ã‚’è¡¨ç¤ºã™ã‚‹ã‚¨ãƒªã‚¢ -->
        <div class="flex justify-center items-center space-x-4 md:space-x-8 mb-10">
            <div class="bg-white rounded-2xl shadow-lg w-32 h-32 md:w-48 md:h-48 flex items-center justify-center">
                <span id="hand-left-emoji" class="text-6xl md:text-8xl hand-emoji"></span>
            </div>
            <div class="bg-white rounded-2xl shadow-lg w-32 h-32 md:w-48 md:h-48 flex items-center justify-center">
                <span id="hand-right-emoji" class="text-6xl md:text-8xl hand-emoji"></span>
            </div>
        </div>

        <!-- ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
        <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
            <button id="game-button" class="w-full sm:w-auto bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-10 rounded-full text-xl md:text-2xl shadow-md transition-all duration-200 btn-active">
                ã‚¹ã‚¿ãƒ¼ãƒˆ
            </button>
            <button id="auto-button" class="w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-10 rounded-full text-xl md:text-2xl shadow-md transition-all duration-200 btn-active">
                è‡ªå‹•
            </button>
        </div>
    </div>

    <script>
        // --- DOMè¦ç´ ã®å–å¾— ---
        const gameButton = document.getElementById('game-button');
        const autoButton = document.getElementById('auto-button');
        const leftHandEmoji = document.getElementById('hand-left-emoji');
        const rightHandEmoji = document.getElementById('hand-right-emoji');

        // --- ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹ ---
        const hands = ['âœŠ', 'âœŒï¸', 'âœ‹'];
        const irregularHands = ['ğŸ¤', 'ğŸ¤Ÿ', 'ğŸ¤˜', 'ğŸ¤™', 'ğŸ‘Œ', 'ğŸ––'];
        let isGameStarted = false;
        let autoPlayTimeoutId = null; // è‡ªå‹•å†ç”Ÿã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆID

        // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ ---
        gameButton.addEventListener('click', handleManualPlay);
        autoButton.addEventListener('click', toggleAutoPlay);

        /**
         * ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€/ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†
         */
        function handleManualPlay() {
            if (!isGameStarted) {
                isGameStarted = true;
                gameButton.textContent = 'æ¬¡ã¸';
            }
            generateAndShowHands();
        }

        /**
         * ã€Œè‡ªå‹•ã€/ã€Œåœæ­¢ã€ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†
         */
        function toggleAutoPlay() {
            // è‡ªå‹•å†ç”ŸãŒæ—¢ã«å®Ÿè¡Œä¸­ã®å ´åˆï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆIDãŒå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
            if (autoPlayTimeoutId) {
                clearTimeout(autoPlayTimeoutId);
                autoPlayTimeoutId = null;
                autoButton.textContent = 'è‡ªå‹•';
                autoButton.classList.remove('bg-orange-400', 'hover:bg-orange-500');
                autoButton.classList.add('bg-green-500', 'hover:bg-green-600');
                gameButton.disabled = false; // ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            } else {
                // è‡ªå‹•å†ç”Ÿã‚’é–‹å§‹
                if (!isGameStarted) {
                    isGameStarted = true;
                    gameButton.textContent = 'æ¬¡ã¸';
                }
                autoButton.textContent = 'åœæ­¢';
                autoButton.classList.remove('bg-green-500', 'hover:bg-green-600');
                autoButton.classList.add('bg-orange-400', 'hover:bg-orange-500');
                gameButton.disabled = true; // ã€Œæ¬¡ã¸ã€ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                autoPlayStep(); // è‡ªå‹•å†ç”Ÿã®ãƒ«ãƒ¼ãƒ—ã‚’é–‹å§‹
            }
        }

        /**
         * è‡ªå‹•å†ç”Ÿã®å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œã™ã‚‹
         */
        function autoPlayStep() {
            const wasIrregular = generateAndShowHands();
            const delay = wasIrregular ? 3000 : 2000; // ã‚¤ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ãªã‚‰3ç§’ã€é€šå¸¸ãªã‚‰2ç§’
            autoPlayTimeoutId = setTimeout(autoPlayStep, delay);
        }
        
        /**
         * 10%ã®ç¢ºç‡ã§ã‚¤ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ãªæ‰‹ã‚’è€ƒæ…®ã—ã€ãƒ©ãƒ³ãƒ€ãƒ ãªæ‰‹ã‚’1ã¤è¿”ã™
         * @returns {string} çµµæ–‡å­—
         */
        function getRandomHand() {
            const isIrregular = Math.random() < 0.1; // 10%ã®ç¢ºç‡
            if (isIrregular) {
                const randomIndex = Math.floor(Math.random() * irregularHands.length);
                return irregularHands[randomIndex];
            } else {
                const randomIndex = Math.floor(Math.random() * hands.length);
                return hands[randomIndex];
            }
        }

        /**
         * ãƒ©ãƒ³ãƒ€ãƒ ã«æ‰‹ã‚’ç”Ÿæˆã—ã¦ç”»é¢ã«è¡¨ç¤ºã™ã‚‹
         */
        function generateAndShowHands() {
            const leftHand = getRandomHand();
            const rightHand = getRandomHand();

            const wasIrregular = irregularHands.includes(leftHand) || irregularHands.includes(rightHand);

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœã‚’é©ç”¨
            [leftHandEmoji, rightHandEmoji].forEach(el => {
                el.classList.remove('pop');
                // DOMã®å†æç”»ã‚’å¼·åˆ¶
                void el.offsetWidth;
                el.classList.add('pop');
            });
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå°‘ã—è½ã¡ç€ã„ã¦ã‹ã‚‰çµµæ–‡å­—ã‚’å¤‰æ›´
            setTimeout(() => {
                leftHandEmoji.textContent = leftHand;
                rightHandEmoji.textContent = rightHand;
            }, 100);

            return wasIrregular;
        }
    </script>

</body>
</html>



